# PhotoBot

A Photo booth [Telegram](https://telegram.org/) Bot.

This bot will watch for changes in a directory and post new images to telegram
channels [Telegram channel](https://telegram.org/tour/channels).

## Compiling

* UNIX-like (Linux, MacOS X, ...) : ```./gradlew build```
* Windows : ```gradlew.bat build```

results :

| File                              | Description                                                         |
|-----------------------------------|---------------------------------------------------------------------|
| `build/PhotoBot-dev.jar`          | The latest build of the library, constant name, useful for testing. |
| `build/libs/PhotoBot-VERSION.jar` | The same file with a [versioned](#Version) name.                    |

## Running

* Create `photobot.properties` (see [photobot.properties.sample](photobot.properties.sample))
    * token : the bot token given by [BotFather](https://t.me/botfather).
    * ids : a comma separated list of channel ids.
        * The bot MUST be admin to post messages on a channel.
        * When the bot receive a message, it will post the `channel id` on the first message it receives on a new
          channel.
* ```gradle run```

## Version

The version number used in the file name and available using `PhotoBot.version()` is generated by inspecting the git
state (see [com.palantir.git-version](https://github.com/palantir/gradle-git-version) for details).

Here is an example : 1.5.7-3-g2aabbbf.dirty

* 1.5.7 is the last tag
* -3- we are 3 commits after the tag
* g2aabbbf : git short hash
* .dirty : some changes are not committed

## How to release (and have a nice version number)

0. git commit
0. git tag -a MAJOR.MINOR.SUB -m "tag vMAJOR.MINOR.SUB"
0. git push origin MAJOR.MINOR.SUB
0. [compile](#Compiling)
